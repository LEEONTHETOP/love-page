<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>ç»™è”¡è”¡çš„å‘Šç™½</title>
  <!-- PWA & Theme -->
  <meta name="theme-color" content="#ff4d6d">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta property="og:title" content="åœ£åœ£â¤è”¡è”¡Â·ä¸“å±æµªæ¼«">
  <meta property="og:description" content="ç‚¹å¼€å³æ»¡å±å¿ƒåŠ¨â€”â€”åœ£åœ£å†™ç»™è”¡è”¡çš„å‘Šç™½ğŸ‰">
  <meta property="og:image" content="cover.jpg">
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --pink:#ff4d6d;--light:#ffeaf2;--sky1:#ff9a9e;--sky2:#fad0c4;--sky3:#fbc2eb;--sky4:#a6c1ee;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    html,body{height:100%;font-family:"Segoe UI","PingFang SC","Microsoft YaHei",sans-serif;overflow:hidden;}
    body{display:flex;justify-content:center;align-items:center;background:linear-gradient(-45deg,var(--sky1),var(--sky2),var(--sky3),var(--sky4));background-size:400% 400%;animation:bgMove 30s ease-in-out infinite;}
    @keyframes bgMove{0%{background-position:0 50%;filter:hue-rotate(0deg);}25%{background-position:100% 50%;filter:hue-rotate(60deg);}50%{background-position:0 50%;filter:hue-rotate(120deg);}75%{background-position:100% 50%;filter:hue-rotate(240deg);}100%{background-position:0 50%;filter:hue-rotate(360deg);}}

    /* Panels */
    #main,#lyricsPanel,#gamePanel{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:opacity .6s ease;}
    #lyricsPanel,#gamePanel{backdrop-filter:blur(12px) saturate(120%);background:rgba(255,255,255,.18);opacity:0;pointer-events:none;}
    #lyricsPanel.show,#gamePanel.show{opacity:1;pointer-events:auto;}

    h1{font-size:clamp(2.2rem,8vw,3.6rem);color:#fff;text-shadow:0 0 14px rgba(255,255,255,.9);margin-bottom:14px;animation:pulse 3s ease-in-out infinite;}
    @keyframes pulse{0%,100%{text-shadow:0 0 12px rgba(255,255,255,.9);}50%{text-shadow:0 0 30px rgba(255,255,255,1);}}

    p.tip{font-size:clamp(1rem,3vw,1.4rem);color:#fff;margin-bottom:24px;text-shadow:0 0 8px rgba(0,0,0,.25);max-width:85%;text-align:center;line-height:1.6;}

    .btn{background:var(--pink);color:#fff;border:none;border-radius:32px;padding:16px 36px;font-size:1rem;margin:8px;box-shadow:0 10px 20px rgba(0,0,0,.18);cursor:pointer;display:flex;align-items:center;gap:8px;transition:transform .2s,box-shadow .2s;}
    .btn:hover{box-shadow:0 12px 26px rgba(0,0,0,.28);} .btn:active{transform:scale(.93);}

    /* Lyrics */
    #lyricsBox{width:92%;max-width:620px;height:68%;overflow-y:auto;padding:22px;color:#fff;font-size:clamp(.9rem,2.5vw,1.25rem);line-height:1.85;}
    #lyricsBox .line{opacity:.35;transition:opacity .3s,font-size .3s;white-space:pre-wrap;text-align:center;}
    #lyricsBox .active{opacity:1;font-size:clamp(1rem,3vw,1.5rem);text-shadow:0 0 14px rgba(255,255,255,.95);}

    /* Game */
    #gameCanvas{width:100%;height:100%;touch-action:none;}
    #scoreBoard{position:absolute;top:20px;left:50%;transform:translateX(-50%);color:#fff;font-size:1.25rem;text-shadow:0 0 6px rgba(0,0,0,.45);}

    /* Fullâ€‘screen floating hearts */
    .floatHeart{position:fixed;pointer-events:none;animation:floatUp linear infinite;will-change:transform,opacity;}
    @keyframes floatUp{from{transform:translateY(0) scale(var(--s,1));opacity:1;}to{transform:translateY(-110vh) scale(calc(var(--s,1)*1.8));opacity:0;}}

    /* Canvas overlay for whale & fish */
    #animCanvas{position:fixed;inset:0;pointer-events:none;}
  </style>
</head>
<body>
  <canvas id="animCanvas"></canvas>
  <!-- ä¸»ç•Œé¢ -->
  <section id="main">
    <h1>è”¡è”¡ï¼Œæˆ‘æƒ³å¯¹ä½ è¯´</h1>
    <p class="tip" id="loveLine"></p>
    <button class="btn" id="musicBtn">ğŸµ æ’­æ”¾éŸ³ä¹</button>
    <div>
      <button class="btn" id="lyricsBtn">ğŸ“œ çœ‹æ­Œè¯</button>
      <button class="btn" id="gameBtn">ğŸ’« å°æ¸¸æˆ</button>
    </div>
  </section>

  <!-- æ­Œè¯é¢æ¿ -->
  <section id="lyricsPanel">
    <div id="lyricsBox"></div>
    <button class="btn" id="backHome1">ğŸ  è¿”å›ä¸»é¡µ</button>
  </section>

  <!-- æ¸¸æˆé¢æ¿ -->
  <section id="gamePanel">
    <canvas id="gameCanvas"></canvas>
    <div id="scoreBoard"></div>
    <button class="btn" id="backHome2">ğŸ  è¿”å›ä¸»é¡µ</button>
  </section>

  <!-- éŸ³é¢‘ -->
  <audio id="bgm" src="æ—¥è½æ²™æ»©å - ä½™ä½³è¿.mp3" preload="auto" loop></audio>

  <!-- å¤‡ç”¨æ­Œè¯ï¼ˆçœç•¥ï¼‰ -->
  <script id="lrcInline" type="text/plain">[00:00.00] ä½œè¯ : Jagger Zhou/ä½™ä½³è¿/HYBS/Alyn Wee/Karn Kaside/å¼ ä¸‰
[00:01.00] ä½œæ›² : HYBS/Alyn Wee/Karn Kasidej
[00:02.00] ç¼–æ›² : HYBS
[00:20.07]å‡ºå“ï¼šç½‘æ˜“æ¡ƒæ°”è”ç›Ÿ
[00:29.68]
[00:29.69]æµ·æ¸©æŸ”åœ°æ²‰æºº
[00:33.46]èº²åœ¨æŸä¸ªåœºæ™¯
[00:35.88]æ²¿ç€ç©ºè¡æµ·å²¸
[00:39.65]å’Œä½ è½»è½»æ‘‡æ‘†
[00:42.33]
[00:42.51]æƒ³èµ·äº†é‚£ç‰‡æ²™æ»©
[00:45.68]ä¼´ç€æœˆè‰²çš„çšç™½
[00:48.29]æˆ‘ä»¬ä»€ä¹ˆéƒ½æ²¡æœ‰è¯´
[00:51.27]CAUSE BABY I AM ALL FOR YOU
[00:54.69]
[00:55.22]â€œCome and ride with me tonightâ€
[00:59.73]
[01:00.07]çœ‹ç€æœˆçƒ
[01:03.10]æ…¢æ…¢å è½
[01:06.15]ç‰µç‰µä½ çš„å°æ‰‹
[01:09.18]åœ¨ä½ å·¦å³
[01:11.83]
[01:12.36]èƒ½ä¸èƒ½å¤Ÿ
[01:15.31]èº²è¿›é»‘æ´
[01:18.28]å†æ‘¸æ‘¸ä½ çš„é¢å¤´
[01:21.50]å†è¿‡å¥½ä¹…å¥½ä¹…
[01:25.37]
[01:27.02]è¶ç€å¤å¤©ä½ çš„ç¬‘å®¹
[01:30.53]èµ–åœ¨ä½ èº«è¾¹ä¸æƒ³èµ°
[01:35.69]å¯æ—¶é—´é‚£ä¹ˆå¿«
[01:40.57]æ˜¥å»ç§‹åˆæ¥ åˆæœŸå¾…
[01:49.37]
[01:50.70]â€œCome and ride with me tonightâ€
[01:54.76]
[01:55.19]ä½™ä½³è¿ & HYBSï¼š
[01:55.55]Please donâ€™t you go
[01:58.53]Iâ€™ll be alone
[02:01.57]Wait until the morning
[02:04.55]Iâ€™ll hold you close
[02:07.45]
[02:07.88]Please donâ€™t you go
[02:10.78]Iâ€™ll be alone
[02:13.82]Wait until the morning
[02:16.92]Ride until itâ€™s dawning
[02:19.52]
[02:19.97]Please donâ€™t you go
[02:23.16]Iâ€™ll be alone
[02:26.21]Wait until the morning
[02:29.10]Iâ€™ll hold you close
[02:31.76]
[02:32.23]Please donâ€™t you go
[02:35.36]Iâ€™ll be alone
[02:38.47]Wait until the morning
[02:41.57]Ride until itâ€™s dawning
[02:50.12]
[02:50.12]åˆ¶ä½œäººï¼šHYBS / Lukell
[02:51.20]æ··éŸ³&æ¯å¸¦å·¥ç¨‹ï¼š Did You Hear Studio
[02:51.72]äººå£°ç¼–è¾‘ï¼šéƒ­èˆ’æ–‡@SBMS Beijing
[02:52.24]ä¼åˆ’ç»Ÿç­¹ : é»„é›¨è–‡/é»„å¥•é’§
[02:52.64]ç›‘åˆ¶ : å¼ ä¸‰
[02:53.68]å‡ºå“äºº : è°¢å¥‡ç¬›
[02:54.24]éŸ³ä¹è¥é”€ : ç½‘æ˜“æ¡ƒæ°”è”ç›Ÿ
[02:54.86]OP : JUICEY
[02:55.40]SP: ND Entertainment Co, Ltd
[02:55.50]ç‰¹åˆ«é¸£è°¢: ä¸Šæµ·å®‰èŒ‚æ–‡åŒ–
[02:55.57]ã€æ­¤ç‰ˆæœ¬ä¸ºæ­£å¼æˆæƒç¿»å”±ä½œå“ï¼Œæœªç»è‘—ä½œæƒäººè®¸å¯ï¼Œä¸å¾—ç¿»å”±ã€ç¿»å½•æˆ–ä½¿ç”¨ã€‘
</script>

  <script>
  /* ========== éšæœºæƒ…è¯ ========== */
  const lines=[
    'é‡è§ä½ ï¼Œæ˜¯æˆ‘æœ€ç¾ä¸½çš„æ„å¤–ï¼Œä½™ç”Ÿè¯·å¤šæŒ‡æ•™~','åœ¨æ¯ä¸€ä¸ªæƒ³ä½ çš„å¤œé‡Œï¼Œæˆ‘æŠŠæ˜Ÿæ˜Ÿéƒ½æ•°ç»™æœˆäº®å¬ã€‚','ä¸–ç•Œå¾ˆå¤§ï¼Œä½†æˆ‘çš„çœ¼é‡Œåªæœ‰ä½ ï¼›è·ç¦»å¾ˆè¿œï¼Œä½†æˆ‘çš„å¿ƒé‡Œå…¨æ˜¯ä½ ã€‚','æˆ‘æƒ³æŠŠå…¨ä¸–ç•Œæœ€æ¸©æŸ”çš„é£ï¼Œå’Œæœ€é—ªè€€çš„æ˜Ÿï¼Œéƒ½é€ç»™ä½ ã€‚','æä¹ åœ£çš„æœªæ¥é‡Œï¼Œä¸€å®šè¦æœ‰æ¨å¨œçš„åå­—ã€‚','å¼‚åœ°åªéš”ä¸¤åº§åŸï¼Œçˆ±å´è®©å¿ƒè´´å¾—æ›´è¿‘ã€‚','æƒ³ç‰µç€ä½ çš„æ‰‹ï¼ŒæŠŠæˆ‘ä»¬çš„æ•…äº‹å†™æˆæ°¸è¿œã€‚','ä»Šæ™šæœˆè‰²çœŸç¾ï¼Œå¯æˆ‘çœ¼é‡Œåªæœ‰ä½ çš„ç¬‘å®¹ã€‚','å¦‚æœæ€å¿µæœ‰å£°éŸ³ï¼Œé‚£ä¸€å®šæ˜¯æ‚„æ‚„ä¸ºä½ å¼¹å¥çš„æƒ…æ­Œã€‚','ä½ çš„åå­—ï¼Œæ˜¯æˆ‘è¯»è¿‡æœ€æµªæ¼«çš„è¯—ã€‚','æƒ³æŠŠæˆ‘æ‰€æœ‰çš„çƒ­æƒ…ï¼Œç»‡è¿›ä½ æ¯ä¸€ä¸ªæ¢¦é‡Œã€‚','é£å¾ˆæ¸©æŸ”ï¼Œå› ä¸ºå®ƒä¹Ÿæƒ³æ‹¥æŠ±ä½ ã€‚','åœ¨æˆ‘çš„å®‡å®™é‡Œï¼Œä½ æ˜¯æ‰€æœ‰çš„æ˜Ÿå…‰ã€‚','ä¸–ç•Œå› ä¸ºä½ è€Œå˜å¾—æµªæ¼«ï¼Œè¿é£éƒ½æ˜¯ç”œçš„ã€‚','æ¯ä¸ªå¹³å‡¡çš„æ—¥å­ï¼Œéƒ½å› æƒ³ä½ è€Œé—ªé—ªå‘å…‰ã€‚'];
  let li=0,tip=document.getElementById('loveLine');function rotate(){tip.textContent=lines[li];li=(li+1)%lines.length;}rotate();setInterval(rotate,4000);

  /* ========== éŸ³ä¹æ’­æ”¾ ========== */
  const bgm=document.getElementById('bgm');
  document.getElementById('musicBtn').onclick=()=>{if(bgm.paused){bgm.play();event.target.textContent='â¸ï¸ æš‚åœéŸ³ä¹';}else{bgm.pause();event.target.textContent='ğŸµ æ’­æ”¾éŸ³ä¹';}};

  /* ========== é¢æ¿åˆ‡æ¢ ========== */
  const main=document.getElementById('main'),lyricsPanel=document.getElementById('lyricsPanel'),gamePanel=document.getElementById('gamePanel');
  document.getElementById('lyricsBtn').onclick=()=>{lyricsPanel.classList.add('show');main.style.opacity=0;};
  document.getElementById('backHome1').onclick=()=>{lyricsPanel.classList.remove('show');main.style.opacity=1;};
  document.getElementById('gameBtn').onclick=startGame;document.getElementById('backHome2').onclick=endGame;

  /* ========== å…¨å±æµ®åŠ¨å°å¿ƒå¿ƒ ========== */
  function spawnHeart(){if(!lyricsPanel.classList.contains('show')&&!gamePanel.classList.contains('show')){const h=document.createElement('div');h.className='floatHeart';h.textContent='â¤';const size=Math.random()*18+16;h.style.left=Math.random()*100+'vw';h.style.bottom='-40px';h.style.fontSize=size+'px';h.style.color=`hsl(${Math.random()*360},90%,85%)`;h.style.setProperty('--s',size/24);h.style.animationDuration=(Math.random()*6+8)+'s';document.body.appendChild(h);setTimeout(()=>h.remove(),15000);} }
  setInterval(spawnHeart,250);

  /* ========== æ­Œè¯åŒæ­¥ ========== */
  const lyricsBox=document.getElementById('lyricsBox');let lrc=[];
  async function loadLyrics(){try{const t=await fetch(encodeURI('æ—¥è½æ²™æ»©å - ä½™ä½³è¿.lrc')).then(r=>r.ok?r.text():Promise.reject());parseLrc(t);}catch{parseLrc(document.getElementById('lrcInline').textContent);} }
  function parseLrc(t){lrc=t.split(/\n+/).map(l=>{const m=l.match(/\[(\d+):(\d+\.\d+)\](.*)/);return m?{time:+m[1]*60+ +m[2],text:m[3]}:null;}).filter(Boolean);lrc.forEach(o=>{const d=document.createElement('div');d.className='line';d.textContent=o.text;lyricsBox.appendChild(d);o.el=d;});}
  loadLyrics();
  bgm.ontimeupdate=()=>{if(!lrc.length)return;const t=bgm.currentTime;let idx=lrc.findIndex((o,i)=>t<o.time&&i>0);idx=idx===-1?lrc.length-1:Math.max(0,idx-1);lrc.forEach((o,i)=>o.el.classList.toggle('active',i===idx));const cur=lrc[idx];if(cur)lyricsBox.scrollTo({top:cur.el.offsetTop-lyricsBox.clientHeight/2,behavior:'smooth'});};

  /* ========== å°æ¸¸æˆï¼ˆç®€ç‰ˆï¼‰ ========== */
  const gc=document.getElementById('gameCanvas'),gctx=gc.getContext('2d');let gW=innerWidth,gH=innerHeight;function gResize(){gW=innerWidth;gH=innerHeight;gc.width=gW;gc.height=gH;}window.addEventListener('resize',gResize);gResize();
  let hearts=[],score=0,run=false,spawnTimer,aniId;function spGameHeart(){hearts.push({x:Math.random()*gW,y:-40,s:Math.random()*18+22,v:Math.random()*1+1.2});}
  function drawGame(){gctx.clearRect(0,0,gW,gH);gctx.fillStyle='rgba(255,255,255,.9)';gctx.textAlign='center';gctx.font='22px sans-serif';hearts.forEach((h,i)=>{h.y+=h.v;gctx.fillText('â¤',h.x,h.y);if(h.y>gH+50)hearts.splice(i,1);});aniId=requestAnimationFrame(drawGame);}gc.addEventListener('pointerdown',e=>{if(!run)return;const rect=gc.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top;hearts.forEach((h,i)=>{if(Math.hypot(h.x-x,h.y-y)<h.s){hearts.splice(i,1);score++;document.getElementById('scoreBoard').textContent=`åˆ†æ•°: ${score}`;}});});
  function startGame(){score=0;hearts=[];run=true;document.getElementById('scoreBoard').textContent='åˆ†æ•°: 0';gamePanel.classList.add('show');main.style.opacity=0;spawnTimer=setInterval(spGameHeart,450);drawGame();}
  function endGame(){run=false;cancelAnimationFrame(aniId);clearInterval(spawnTimer);gamePanel.classList.remove('show');main.style.opacity=1;alert(`æ¸¸æˆç»“æŸï¼å…±æ”¶é›† ${score} é¢—çˆ±å¿ƒâ¤`);} 

 /* ======== çˆ±å¿ƒæ°”çƒæŸ ğŸˆ & å°é‡‘é±¼åŠ¨ç”» (canvas) ======== */
const aCanvas = document.getElementById('animCanvas');
const actx    = aCanvas.getContext('2d');
function resize(){ aCanvas.width = innerWidth; aCanvas.height = innerHeight; }
window.addEventListener('resize',resize); resize();

/* å·¥å…· */
const rand = (min,max)=>Math.random()*(max-min)+min;

/* æ•°æ® */
const balloons = [], fishes = [];

/* ç”Ÿæˆæ°”çƒæŸï¼šéšæœº Xï¼Œåº•éƒ¨èµ·é£ */
function spawnBalloon(){
  balloons.push({
    t:0,
    x: rand(0.15*aCanvas.width, 0.85*aCanvas.width),
    y0: aCanvas.height + 60,          // èµ·ç‚¹ç•¥åœ¨åº•éƒ¨ä¹‹å¤–
    swayPhase: rand(0,Math.PI*2)      // æ¨ªå‘æ‘†åŠ¨ç›¸ä½
  });
}
setInterval(spawnBalloon, 30000);     // æ¯ 30 s ä¸€æŸ

/* ç”Ÿæˆå°é‡‘é±¼ (â¤ ç²’å­) ä¸ä¹‹å‰ç›¸åŒ */
function spawnFish(){
  fishes.push({
    x:rand(0,aCanvas.width),
    y:rand(0,aCanvas.height),
    ang:rand(0,Math.PI*2),
    s:rand(.4,.9)
  });
}
setInterval(()=>{for(let i=0;i<3;i++)spawnFish();},7000);

/* ä¸»å¾ªç¯ */
function draw(){
  actx.clearRect(0,0,aCanvas.width,aCanvas.height);

  /*â€” é‡‘é±¼ â€”*/
  fishes.forEach(f=>{
    f.x+=Math.cos(f.ang)*1.2*f.s;
    f.y+=Math.sin(f.ang)*1.2*f.s;
    f.ang+=rand(-.05,.05);
    if(f.x<-40||f.x>aCanvas.width+40)f.ang=Math.PI-f.ang;
    if(f.y<-40||f.y>aCanvas.height+40)f.ang=-f.ang;
    actx.save();
    actx.translate(f.x,f.y);
    actx.rotate(f.ang);
    actx.font=`${14*f.s}px serif`;
    actx.fillStyle='rgba(255,255,255,.75)';
    actx.fillText('â¤',0,0);
    actx.restore();
  });

  /*â€” æ°”çƒæŸ â€”*/
  const heartSize = 24;
  balloons.forEach((b,i)=>{
    b.t += 1/60;                        // 60 FPS
    const rise = b.t*40;                // ä¸Šå‡é€Ÿåº¦ (px/s)
    const sway = Math.sin(b.t+ b.swayPhase)*30; // å·¦å³æ‘‡æ‘†
    const x = b.x + sway;
    const y = b.y0 - rise;

    if(y < -120){ balloons.splice(i,1); return; }

    // 1ï¸âƒ£ ç»³å­
    actx.strokeStyle = 'rgba(255,255,255,.6)';
    actx.lineWidth   = 1;
    actx.beginPath();
    actx.moveTo(x,y);
    actx.lineTo(x,y+heartSize*3);
    actx.stroke();

    // 2ï¸âƒ£ ç”» 4 é¢—å¿ƒç»„æˆæ°”çƒæŸ (2 ä¸Š 2 ä¸‹)
    const offsets=[[-heartSize*0.6,0],[heartSize*0.6,0],[-heartSize*0.3,heartSize*0.9],[heartSize*0.3,heartSize*0.9]];
    offsets.forEach((off,idx)=>{
      actx.font=`${heartSize-(idx>1?4:0)}px serif`;
      actx.fillStyle=`rgba(255,255,255,${0.9 - idx*0.1})`;
      actx.fillText('â¤', x+off[0], y+off[1]);
    });
  });

  requestAnimationFrame(draw);
}
draw();
  /* ========== æ—¥å‡º / æ—¥è½ å…‰æ™• (overlay div) ========== */
  function sunflash(){const d=document.createElement('div');Object.assign(d.style,{position:'fixed',inset:0,background:'radial-gradient(circle at 50% 120%,rgba(255,200,100,.9) 0%,rgba(255,150,150,0) 60%)',pointerEvents:'none',opacity:0,transition:'opacity 3s linear'});document.body.appendChild(d);requestAnimationFrame(()=>d.style.opacity=1);setTimeout(()=>d.style.opacity=0,12000);setTimeout(()=>d.remove(),15000);}setInterval(sunflash,30000);

  // initial spawns
  for(let i=0;i<15;i++)spawnFish();spawnWhale();
  </script>
</body>
</html>
